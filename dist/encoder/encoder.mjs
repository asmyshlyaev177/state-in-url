import{SYMBOLS as n}from"../constants/constants.mjs";import{typeOf as u}from"../utils.mjs";function p(e){return typeof e=="function"||typeof e=="symbol"?"":l(e)?e:JSON.stringify(structuredClone(e),c).replace(/'/g,"%27").replace(/"/g,"'")}function c(e,r){const o=u(r);if(o!=="object"&&o!=="array")return f(r);if(o==="object"){const t=r;for(const i of Object.keys(t))t[i]=c(e,t[i]);return t}return o==="array"?r.map(t=>c(e,t)):r}const f=e=>{switch(u(e)){case"date":return n.date+new Date(e).toISOString();case"undefined":return n.undefined;default:return e}};function y(e,r){return a(e.replace(/'/g,'"').replace(/%27/g,"'"),r)}function a(e,r){try{return JSON.parse(e,s)}catch{return r}}function s(e,r){return typeof r=="string"?d(r):r}const d=e=>{if(e!==n.undefined)return e?.startsWith?.(n.date)?new Date(e.slice(1)):e},g=new RegExp(`^(${n.undefined}|${n.date})`),l=e=>g.test(String(e));export{y as decode,d as decodePrimitive,p as encode,f as encodePrimitive,a as parseJSON,s as reviver};
