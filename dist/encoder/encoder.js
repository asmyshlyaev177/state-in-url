"use strict";var n=require("../constants/constants.js");var u=require("../utils.js");const s=/'/g;const p=/"/g;const O=/%27/g;function v(e){if(typeof e==="function"||typeof e==="symbol")return"";if(g(e)){return e}return JSON.stringify(structuredClone(e),c).replace(s,"%27").replace(p,"'")}function c(e,r){const i=u.typeOf(r);if(i!=="object"&&i!=="array"){return d(r)}if(i==="object"){const t=r;for(const o of Object.keys(t)){t[o]=c(e,t[o])}return t}if(i==="array"){return r.map(t=>c(e,t))}return r}const d=e=>{switch(u.typeOf(e)){case"date":return n.SYMBOLS.date+new Date(e).toISOString();case"undefined":return n.SYMBOLS.undefined;default:return e}};function y(e,r){return a(e.replace(s,'"').replace(O,"'"),r)}function a(e,r){try{return JSON.parse(e,f)}catch{return r}}function f(e,r){return typeof r==="string"?S(r):r}const S=e=>{if(e===n.SYMBOLS.undefined)return void 0;if(e?.startsWith?.(n.SYMBOLS.date))return new Date(e.slice(1));return e};const l=new RegExp(`^(${n.SYMBOLS.undefined}|${n.SYMBOLS.date})`);const g=e=>l.test(String(e));exports.decode=y;exports.decodePrimitive=S;exports.encode=v;exports.encodePrimitive=d;exports.parseJSON=a;exports.reviver=f;
