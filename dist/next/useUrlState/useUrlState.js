"use strict";var g=require("react");var p=require("next/navigation");var S=require("../../parseSPObj.js");var j=require("../../useUrlStateBase/useUrlStateBase.js");var a=require("../../utils.js");function k(r){return r&&r.__esModule?r:{default:r}}var s=k(g);function q(r,t){const l=t?.useHistory;const u=p.useRouter();const d=s.default.useMemo(()=>({push:(...e)=>{if(l===void 0?true:!!l){a.routerHistory.push(...e)}else{u.push(...e)}},replace:(...e)=>{if(l===void 0?true:!!l){a.routerHistory.replace(...e)}else{u.replace(...e)}}}),[u]);const{state:U,updateState:o,updateUrl:n,reset:c,getState:v,pendingUrlUpdate:m}=j.useUrlStateBase(r,d,({parse:e})=>{return a.isSSR?S.parseSPObj(a.filterUnknownParams(r,t?.searchParams),r):e(a.filterUnknownParamsClient(r,t?.searchParams||a.getSearch()))});const i=p.useSearchParams();s.default.useEffect(()=>{if(!m()){o(a.filterUnknownParams(r,S.parseSPObj(Object.fromEntries([...i.entries()]),r)))}},[i]);const f=s.default.useMemo(()=>{const e={..._};if(t?.scroll!==void 0)e.scroll=t.scroll;if(t?.replace!==void 0)e.replace=t.replace;return e},[t?.scroll,t?.replace]);const P=s.default.useCallback((e,b)=>n(e,{...f,...b}),[n]);const h=s.default.useCallback(e=>{c({...f,...e})},[c]);return{setState:o,setUrl:P,urlState:U,reset:h,getState:v}}const _={replace:true,scroll:false};exports.useUrlState=q;
